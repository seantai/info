<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/info/blog/rss.xml" title="IFC.js Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/info/blog/atom.xml" title="IFC.js Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-react-helmet="true">ğŸ¤ Picking | IFC.js</title><meta data-react-helmet="true" property="og:url" content="https://IFCjs.github.io/info/docs/Guide/web-ifc-three/Tutorials/Picking"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ğŸ¤ Picking | IFC.js"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><meta data-react-helmet="true" property="og:image" content="https://IFCjs.github.io/info/img/social-card.png"><meta data-react-helmet="true" name="twitter:image" content="https://IFCjs.github.io/info/img/social-card.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/info/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://IFCjs.github.io/info/docs/Guide/web-ifc-three/Tutorials/Picking"><link data-react-helmet="true" rel="alternate" href="https://IFCjs.github.io/info/docs/Guide/web-ifc-three/Tutorials/Picking" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://IFCjs.github.io/info/ja/docs/Guide/web-ifc-three/Tutorials/Picking" hreflang="ja"><link data-react-helmet="true" rel="alternate" href="https://IFCjs.github.io/info/docs/Guide/web-ifc-three/Tutorials/Picking" hreflang="x-default"><link rel="stylesheet" href="/info/assets/css/styles.5a0cdba1.css">
<link rel="preload" href="/info/assets/js/runtime~main.a1293175.js" as="script">
<link rel="preload" href="/info/assets/js/main.c1a5ee5a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/info/"><img src="/info/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/info/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">IFC.js</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/info/docs/Introduction">Docs</a><a class="navbar__item navbar__link" href="/info/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.com/invite/g7Uzn2KSwB" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a><a href="https://github.com/IFCjs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/info/docs/Guide/web-ifc-three/Tutorials/Picking" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/info/ja/docs/Guide/web-ifc-three/Tutorials/Picking" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">æ—¥æœ¬èª</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/info/"><img src="/info/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/info/img/logo.svg" alt="IFC.js Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">IFC.js</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/info/docs/Introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/info/blog">Blog</a></li><li class="menu__list-item"><a href="https://discord.com/invite/g7Uzn2KSwB" target="_blank" rel="noopener noreferrer" class="menu__link">Community</a></li><li class="menu__list-item"><a href="https://github.com/IFCjs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/info/docs/Guide/web-ifc-three/Tutorials/Picking" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/info/ja/docs/Guide/web-ifc-three/Tutorials/Picking" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">æ—¥æœ¬èª</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/info/docs/Introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/info/docs/Hello world">Hello world</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/Getting started">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">ğŸ§© web-ifc</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/info/docs/Guide/web-ifc/Introduction">Introduction</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">ğŸ§© web-ifc-three</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/Introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/Setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/api">API</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">ğŸ“ Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/info/docs/Guide/web-ifc-three/Tutorials/Picking">ğŸ¤ Picking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/Tutorials/Highlighting">âœ¨ Subsets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/Tutorials/Properties">ğŸ“ƒ Properties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/Tutorials/Spatial tree">ğŸŒ³ Spatial tree</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/Tutorials/Hiding">ğŸ‘“ Hiding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/info/docs/Guide/web-ifc-three/Tutorials/Traversing">ğŸ¢ Traversing</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">ğŸ§© web-ifc-viewer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/info/docs/Guide/web-ifc-viewer/Introduction">Introduction</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">ğŸ¤ Picking</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>ğŸš¶â€â™€ï¸
So far we have only loaded IFC models into the scene. That&#x27;s already great, but it would be even better to be able to interact with that model, and that&#x27;s precisely what we&#x27;re going to do.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import-threejs-dependencies"></a>Import Three.js dependencies<a class="hash-link" href="#import-threejs-dependencies" title="Direct link to heading">#</a></h3><p>  âš¡âš¡âš¡
Before you can do things with objects, you need to be able to select them. This can be easily achieved with the <a href="https://threejs.org/docs/#api/en/core/Raycaster" target="_blank" rel="noopener noreferrer">Three.js Raycaster</a>, which can be imported from <code>three</code>&#x27;s core library. In addition, we will import a <a href="https://threejs.org/docs/#api/en/math/Vector2" target="_blank" rel="noopener noreferrer">Vector2</a> object to store the mouse position in the scene.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token keyword module" style="color:#728fcb">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#b6ad9a">{</span><span class="token imports"></span></div><div class="token-line" style="color:#728fcb"><span class="token imports">  </span><span class="token imports maybe-class-name">Raycaster</span><span class="token imports punctuation" style="color:#b6ad9a">,</span><span class="token imports"></span></div><div class="token-line" style="color:#728fcb"><span class="token imports">  </span><span class="token imports maybe-class-name">Vector2</span><span class="token imports"></span></div><div class="token-line" style="color:#728fcb"><span class="token imports"></span><span class="token imports punctuation" style="color:#b6ad9a">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#728fcb">from</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&quot;three&quot;</span><span class="token punctuation" style="color:#b6ad9a">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="alert alert--primary" role="alert" style="margin:2rem"><div class="icon_1PGw"><div class="iconContainer_2Rnc visible_2147"><a class="link_Lh4h undefined">ğŸ’¡</a></div></div>The Raycaster allows you to shoot &quot;beams&quot; that hit objects in the scene and return their information.</div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import-three-mesh-bvh-optional"></a>Import three-mesh-bvh (optional)<a class="hash-link" href="#import-three-mesh-bvh-optional" title="Direct link to heading">#</a></h3><p>  ğŸ‘©â€ğŸš€ğŸš€
In addition, we will import the <a href="https://github.com/gkjohnson/three-mesh-bvh" target="_blank" rel="noopener noreferrer">three-mesh-bvh library</a> to make the selection of objects much more optimal. This can be installed with <code>npm i three-mesh-bvh</code>. Don&#x27;t worry, you don&#x27;t have to learn how to use that library. Just give us these library objects and IFC.js will take care of the rest.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token keyword module" style="color:#728fcb">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#b6ad9a">{</span><span class="token imports"></span></div><div class="token-line" style="color:#728fcb"><span class="token imports">    acceleratedRaycast</span><span class="token imports punctuation" style="color:#b6ad9a">,</span><span class="token imports"></span></div><div class="token-line" style="color:#728fcb"><span class="token imports">    computeBoundsTree</span><span class="token imports punctuation" style="color:#b6ad9a">,</span><span class="token imports"></span></div><div class="token-line" style="color:#728fcb"><span class="token imports">    disposeBoundsTree</span></div><div class="token-line" style="color:#728fcb"><span class="token imports"></span><span class="token imports punctuation" style="color:#b6ad9a">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#728fcb">from</span><span class="token plain"> </span><span class="token string" style="color:#728fcb">&#x27;three-mesh-bvh&#x27;</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain"></span><span class="token comment" style="color:#b6ad9a">// Sets up optimized picking</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">ifcLoader</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">ifcManager</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">setupThreeMeshBVH</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                        computeBoundsTree</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                        disposeBoundsTree</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">                        acceleratedRaycast</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="store-reference-of-ifc-models"></a>Store reference of IFC models<a class="hash-link" href="#store-reference-of-ifc-models" title="Direct link to heading">#</a></h3><p>  ğŸ ğŸ ğŸ 
Before doing anything else, it is necessary to save a reference to the IFC models in the scene in order to select them. To do this, we just need to create an array where we store the models we load:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token comment" style="color:#b6ad9a">//Sets up the IFC loading</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#728fcb"><span class="token plain"></span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> ifcModels </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token punctuation" style="color:#b6ad9a">]</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain"></span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> ifcLoader </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">IFCLoader</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">ifcLoader</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">ifcManager</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">setWasmPath</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&quot;../../&quot;</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">ifcLoader</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">load</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token string" style="color:#728fcb">&quot;../../IFC/01.ifc&quot;</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">ifcModel</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#063289">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#728fcb"><span class="token plain">  ifcModels</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">push</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">ifcModel</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">mesh</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  scene</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">add</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">ifcModel</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">mesh</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain"></span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-do-it"></a>How to do it<a class="hash-link" href="#how-to-do-it" title="Direct link to heading">#</a></h2><p>  ğŸ
Next we will create an instance of the Raycaster and the mouse position vector. To optimise the application, the Raycaster will only retrieve information from the first object it encounters.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> raycaster </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">Raycaster</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">raycaster</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">firstHitOnly</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token boolean" style="color:#728fcb">true</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain"></span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> mouse </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token keyword" style="color:#728fcb">new</span><span class="token plain"> </span><span class="token class-name">Vector2</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now we need a function for the Raycaster to cast rays, calculating the position of the mouse on the screen. Note that:</p><ul><li><p>The threeCanvas object is the HTML <code>&lt;canvas&gt;</code> element where the Three.js scene is being rendered. A reference to it can be retrieved with <code>getElementByID()</code>.</p></li><li><p>It is necessary to specify which objects the beam collides with. In this case, it will only collide with the loaded IFC models, i.e. if there are more objects in the scene, it will ignore them.</p></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token function" style="color:#b29762">cast</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token comment" style="color:#b6ad9a">// Computes the position of the mouse on the screen</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> bounds </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> threeCanvas</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">getBoundingClientRect</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> x1 </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">clientX</span><span class="token plain"> </span><span class="token operator" style="color:#063289">-</span><span class="token plain"> bounds</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">left</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> x2 </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> bounds</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">right</span><span class="token plain"> </span><span class="token operator" style="color:#063289">-</span><span class="token plain"> bounds</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">left</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  mouse</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">x1 </span><span class="token operator" style="color:#063289">/</span><span class="token plain"> x2</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">*</span><span class="token plain"> </span><span class="token number" style="color:#063289">2</span><span class="token plain"> </span><span class="token operator" style="color:#063289">-</span><span class="token plain"> </span><span class="token number" style="color:#063289">1</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> y1 </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">clientY</span><span class="token plain"> </span><span class="token operator" style="color:#063289">-</span><span class="token plain"> bounds</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">top</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> y2 </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> bounds</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">bottom</span><span class="token plain"> </span><span class="token operator" style="color:#063289">-</span><span class="token plain"> bounds</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">top</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  mouse</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token operator" style="color:#063289">-</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">y1 </span><span class="token operator" style="color:#063289">/</span><span class="token plain"> y2</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token operator" style="color:#063289">*</span><span class="token plain"> </span><span class="token number" style="color:#063289">2</span><span class="token plain"> </span><span class="token operator" style="color:#063289">+</span><span class="token plain"> </span><span class="token number" style="color:#063289">1</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token comment" style="color:#b6ad9a">// Places it on the camera pointing to the mouse</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  raycaster</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">setFromCamera</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">mouse</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> camera</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token comment" style="color:#b6ad9a">// Casts a ray</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#728fcb">return</span><span class="token plain"> raycaster</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">intersectObjects</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">ifcModels</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain"></span><span class="token punctuation" style="color:#b6ad9a">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>  ğŸ‘“
We have a function that fires a ray and returns the object it collides with, but we are not doing anything with that object. Let&#x27;s create a second function that gets the index of the face the ray hit and logs in the console the Express ID of the object it belongs to.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token keyword" style="color:#728fcb">function</span><span class="token plain"> </span><span class="token function" style="color:#b29762">pick</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> found </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> </span><span class="token function" style="color:#b29762">cast</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">[</span><span class="token number" style="color:#063289">0</span><span class="token punctuation" style="color:#b6ad9a">]</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#728fcb">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">found</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#b6ad9a">{</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> index </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> found</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">faceIndex</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> geometry </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> found</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">object</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">geometry</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> ifc </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> ifcLoader</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">ifcManager</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token keyword" style="color:#728fcb">const</span><span class="token plain"> id </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> ifc</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">getExpressId</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">geometry</span><span class="token punctuation" style="color:#b6ad9a">,</span><span class="token plain"> index</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token method function property-access" style="color:#b29762">log</span><span class="token punctuation" style="color:#b6ad9a">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#b6ad9a">)</span><span class="token punctuation" style="color:#b6ad9a">;</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain">    </span><span class="token punctuation" style="color:#b6ad9a">}</span><span class="token plain"></span></div><div class="token-line" style="color:#728fcb"><span class="token plain"></span><span class="token punctuation" style="color:#b6ad9a">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="alert alert--primary" role="alert" style="margin:2rem"><div class="icon_1PGw"><div class="iconContainer_2Rnc visible_2147"><a class="link_Lh4h undefined">ğŸ’¡</a></div></div>The Raycaster always returns an array of objects, even if <i>raycaster.firstHitOnly = true;</i>. In this case, the array will only contain one object that can be extracted with <i>[0]</i>.</div><p>Finally, all that remains is to associate that function with an event (in this case it&#x27;s a double click).</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="background-color:#FFFFFF;color:#728fcb"><div class="token-line" style="color:#728fcb"><span class="token plain">  threeCanvas</span><span class="token punctuation" style="color:#b6ad9a">.</span><span class="token property-access">ondblclick</span><span class="token plain"> </span><span class="token operator" style="color:#063289">=</span><span class="token plain"> pick</span><span class="token punctuation" style="color:#b6ad9a">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If you have done everything right and double click on an item, you will see its Express ID in the console (you can access the console by pressing F12 or by inspecting the page).</p><iframe class="threeScene_3QXR" width="100%" height="300" src="https://ifcjs.github.io/hello-world/scenes/picking/" frameborder="0"></iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="next-steps"></a>Next steps<a class="hash-link" href="#next-steps" title="Direct link to heading">#</a></h2><p>  ğŸ‰ğŸ‰ğŸ‰
Congratulations! You now know how to get the ID of an object by clicking on it. Now we can do many things using that ID.</p><p>  âœ¨
However, it would be nice if the user could see graphically that the object has been selected. For that, let&#x27;s go to the next point, where we will learn how to highlight elements.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/info/docs/Guide/web-ifc-three/api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« API</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/info/docs/Guide/web-ifc-three/Tutorials/Highlighting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">âœ¨ Subsets Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a><ul><li><a href="#import-threejs-dependencies" class="table-of-contents__link">Import Three.js dependencies</a></li><li><a href="#import-three-mesh-bvh-optional" class="table-of-contents__link">Import three-mesh-bvh (optional)</a></li><li><a href="#store-reference-of-ifc-models" class="table-of-contents__link">Store reference of IFC models</a></li></ul></li><li><a href="#how-to-do-it" class="table-of-contents__link">How to do it</a></li><li><a href="#next-steps" class="table-of-contents__link">Next steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/info/docs/introduction">Tutorial</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.com/invite/g7Uzn2KSwB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/agviegasBIM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/info/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/IFCjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 IFC.js.</div></div></div></footer></div>
<script src="/info/assets/js/runtime~main.a1293175.js"></script>
<script src="/info/assets/js/main.c1a5ee5a.js"></script>
</body>
</html>